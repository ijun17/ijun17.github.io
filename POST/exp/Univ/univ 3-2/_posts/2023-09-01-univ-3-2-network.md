---
layout: post
title: "[3학년2학기]데이터통신"
order: 20
---

# 중간고사
* 통신 오류 검출
* MAC 주소 확인 ipconfig/all
* ipv4 32비트
* 허브, 더미허브
* 라우터 
* 네트워크 접속형태 : 스타토폴리지 (가장 대표적 / 허브 스위치), 버스 , 링

3장
* LAN에서 통신 방식 MAC 주소 사용 IP를 MAC 주소로 변환
* LAN - 브로드 캐스트(다 받지만 MAC으로 자신에게 보낸것만 확인)
* 통신 오류 검출 : 패리티, 블록 체크섬, CRC()
* CRC연산을 하여 나머지 0인지(0이 아니면 오류 발생)
* 이더넷 - CSMA/CD(collision detection), 충돌하면 랜덤하게 쉬고 다시 패킷 전송
* LBT
* 무선랜에서는 collision avoidance (이더넷관 차이점)
* 패킷 교환 장점

4장
* OSI 수신 송신은 7계층 모두 사용 중간노드(라우터 등)는 하위계층(물리, 데이터 링크, 네트워크 계층)만 사용
* TCP/IP OSI와 비교하여 어떤 계층과 서로 매치 되는지
* 데이터 링크 계층 규칙 - 이더넷 헤드(수신지 MAC, 송신지 MAc)
* MAC 6바이트 
* 스위치 MAC 주소 테이블을 만들어 해당 MAC port에만 데이터 전송(성능 좋음)

# 웹 프로그래밍
* form : 브라우저에서 서버로 데이터 전송 name, method, action, input(tag)
* php로 post 방식으로 데이터 받아 echo
* GET 방식 php(href에서 ?뒤에 &로 여러개 지정가능)

# 소켓 프로그래밍
* 코드만 서버, 클라이언트
* 포트 맞추는거
* 서버 listen > accept > recv > send > close
* 클라 socket > connect > send > recv > close

소켓 UDP
* 하나의 소켓만 쓴다는 차이
* 포트
* 서버 socket > bind > recvfrom > sendto > close
* 클라 socket > sendto > recvfrom > close





# 네트워크

`네트워크`
* 컴퓨터를 서로 연결하는 것
* 연결(통신)방법은 LAN(Local Area Network), 케이블, 무선매체 등

`패킷`
* 네트워크를 통해 전송되는 데이터의 전송 단위. 
* 순서없이 랜덤으로 전송.
* 구조 - 헤더(데이터 형태와 송수신지), 페이로드(데이터), 제어 요소 등
    * 헤더: 데이터 송수신지, 일련번호
    * 페이로드: 실제 전송 데이터
* ex) 1 0110010, 2 10110011

`대역폭`
* 최대 데이터 전송 속도. 
* 기본 단위는 bps

`와이어 샤크`
* 네트워크 분석 도구
* WinPcap을 사용하여 패킷 캡처
* GPL GNU 오픈소스 소프트웨어
* 패킷 캡처 과정
    1. 캡처하려는 이더넷 선택
    2. 웹사이트 접속(이때 캐시가 되어 있다면 통신이 안이루어질수 있음)
    3. 패킷 리스트 중에 캡처하려는 프로토콜 필터링

`이더넷`
* 회사, 학교 등 한정된 영역에서 사용되는 로컬 영역 네트워크(LAN) 기술로 보통 유선으로 연결

`인터넷`
* 유무선으로 연결하는 글로벌 네트워크 기술

`IP`
* 네트워크에 연결된 장치의 고유주소
* IPv4: "x.x.x.x" 형식으로 네 개의 8비트 숫자로 표현
* IPv6: 128비트로 표현되며, 16진수 숫자와 콜론(:)을 사용하여 표기

# 네트워크 명령어(cmd)

* `hostname`: 컴퓨터 이름 확인
* `net user`: 컴퓨터 사용자 계정 확인
* `ipconfig`: 컴퓨터의 네트워크 설정 정보(IP주소, 게이트웨이 등)
* `ipconfig/all`: 컴퓨터의 실제 주소(MAC, 물리적 주소)
* `ipconfig/release`: IP 주소 해제. 이후 네트워크 연결 해제
* `ipconfig/renew`: 네크워크에서 DHCP를 사용할 때 새로운 IP주소 생성
* `ping IP주소`: 네트워크 상태 점검  
* `tracert IP주소`: IP주소까지의 경로 추적

# WireShark

네트워크 분석도구.

`Wincap` vs `Npcap`
* 둘다 와이어 샤크에서 쓰이는 네트워크 패킷을 캡처하는 라이브러리 및 드라이버
* Npcap은 window 10에 호환성 높음

현재 WireShark는 기본으로 Npcap을 다운받도록 되어있음. 나는 기본 설치 설정 그대로 설치함.

- 네트워크 통신을 하는 인터페이스를 선택하면 패킷 캡처 가능
- 화면 구조 - 패킷 리스트 영역, 패킷 상세 영역, 패킷 데이터 영역
- 필터에 조건을 주어 특정 패킷만 캡처하도록 할 수 있음
- 웹 사이트가 캐시되면 통신을 하지 않기 때문에 패킷을 캡쳐할 수 없음

# 네트워크 구성

* `컴퓨터`
* `접속장치` : 데이터를 전송하기 위한 장치
* `전송매체`

## 접속장치

`LAN 카드(NIC)`
* 외부 네트워크와 데이터를 송수신하기 위한 컴퓨터 내에 설치하는 확장 카드
* 전송매체에 접속, 데이터 입출력 및 송수신, 프로토콜 처리 기능
* 마더보드 확장 슬롯에 설치
* 48비트의 교유의 식별코드인 MAC 주소가 있음

`허브`
* 여러개의 입출력 포트가 있음
* 컴퓨터가 3대 이상일 때 사용
* 모든 대상에게 데이터 전송
* 이더넷 케이블(UTP) 사용
* 가장 간단하고 저렴
* `더미허브`
* `스위칭허브` 
* `스태커블 허브`
* `인텔리전트 허브`

`스위치`
* 컴퓨터에 할당되는 대역폭 극대화

`브리지`
* 두개 이상의 근거리 통신망을 연결하여 하나의 네트워크로

`게이트웨이`
* 종류가 다른 두개이상의 네트워크의 정보를 주고받는 장치
* 접속 가능 통신망 : LAN, PDN, PSDN
* 브리지와의 차이점 : 서로 다른 프로토콜 통신망 간에도 연결 가능

`중계기`
* 접속 시스템 수 증가, 네트워크 전송 거리 연장
* 수신받은 신호를 증폭하여(내용 변경 X) 다음 구간으로 재전송
* 광섬유(전송거리:수~수백KM)에서도 사용

`라우터`

............

## 전송매체

`전송매체`(케이블, 전파)


................




# 네트워크 형태

`LAN(근거리 네트워크)`
* 범위가 건물이나 특정 지역
* 두 LAN을 링크로 연결할 수 있음

`WAN(광역 네트워크)`
* 다수의 LAN을 연결한 것
* 회사와 공장이 멀리 떨어져있는 경우 사용

`인트라넷`
* 인터넷 기술을 이용한 사설 네트워크
* ISP(인터넷 서비스 제공업체)로 먼 지역도 연결


...........




# 통신 방식

## LAN에서

`유니 캐스트` 
* 서버-클라이언트 1:1
* MAC 주소로 특정 컴퓨터에만 전송
* 수신지 MAC 주소가 다르면 버림 

`브로드 캐스트` 
* 영역안에 모든 컴퓨터에 전송
* 다른 라우터를 찾거나, 라우터끼리 데이터를 교환할 때, 서버가 모든 클라이언트에게 알릴 때 등
* 네트워크 성능 저하될 수 있음

`멀티 캐스트`
* 특정 그룹만 데이터 전송
* 유니 캐스트, 브로드 캐스트의 장점을 결합

## 전송방향에 따라

`단방향(simplex) 통신`
* 송신측과 수신측이 미리 고정
* 데이터가 한쪽 방향으로
* 단방향이여도 전송로는 두개가 필요
* 라디오, 아날로그 TV, 모니터, 키보드 등

`양방향(duplex) 통신`
* `반이중(Half-Duplex) 통신` : 송수신 동시에 못함(채널 1개) ex) 무전기
* `전이중(Full-Duplex) 통신` : 송수신 동시에 가능(채널 2개)

## 직렬, 병렬

`직렬 전송`
* 











# OSI 참조 모델

송신 맥 수신 맥 데이터
csma/ca 와 ?의 차이점
이더넷 전송시점 차이점?

계층화: 프로토콜을 몇개의 계층으로 나누는 것

`OSI 참조 모델` : 통신 기능을 7개로 계층화한 규격
* 7 응용 계층
* 6 표현 계층
* 5 세션 계층
* 4 전송 계층
* 3 네트워크 계층
* 2 데이터 링크 계층
* 1 물리 계층

특징
* 하드웨어나 소프트웨어의 논리적인 변경없이 시스템 간의 통신을 개방
* 각 계층은 헤더와 데이터 단위로 정의
* 상위-하위 계층 사이에 주고받는 것을 SDU(서비스 데이터 단위)
* 같은 계층 사이에 주고받는 것을 PDU(프로토콜 데이터 단위)
* PDU는 각 계층마다 라벨을 붙임(링크-프레임, 네트워크-패킷, 전송-세그먼트)

`TCP/IP 모델`: OSI 참조 모델을 4계층으로 단순화
* 4 응용 계층
* 3 전송 계층
* 2 네트워크 계층
* 1 네트워크 접속 계층


MAC addrestt
* 48비트(6바이트)
* aa-bb-cc-dd-ee-ff 



## 데이터 링크 계층

물리적 링크를 이용하여 신뢰성 있는 데이터를 전송하는 계층

비트를 프레임이라는 논리적 단위로 구성

전송하려는 데이터에 인접하는 노드(시스템)의 주소가 더해진다

주소는 최종 수신지의 주소가 아니라 전송되는 다음 노드의 주소

네트워크 계층에서 받은 데이터 단위(패킷)를 프레임으로 구성하여 물리 계층으로 전송

기능
* 주소 지정 : 이 계층에서 추가된 시작과 끝부분에는 가장 최근에 데이터가 지나온 노드(시스템)와 다음에 접근할 노드의 물리 주소가 포함된다.​
* 순서 제어 : 데이터를 순차적으로 전송하기 위해 프레임 번호 부여 기능을 수행한다. 수신 노드에서 식별 번호를 추가하여 프레임의 순서를 제어한다.​
* 흐름 제어 : 한 번에 전송할 수 있는 데이터양을 조절하고, 연속으로 프레임을 전송할 때 수신 여부를 확인하는 기능을 수행한다.​
* 오류 처리 : 오류 검출과 정정 기능을 수행하고, 오류가 발생한 프레임의 재전송을 요구할 수 있다.​
* 프레임 : 데이터를 전송할 때 처리가 쉽도록 프레임 단위로 전송한다.​
* 동기화 : 헤더에는 수신 측에 프레임이 도착했음을 알리는 비트가 있고, 트레일러에는 프레임의 끝을 나타내는 비트와 오류를 제어하는 비트 등이 있다.​
* 데이터 링크 설정 : 전송할 데이터의 앞에는 헤더를, 뒤에는 트레일러를 추가하여 물리 계층으로 전달하는데, 헤더와 트레일러에는 송신 측 주소와 수신 측 주소 등의 정보가 포함된다. 수신 측의 데이터 링크 계층은 헤더와 트레일러를 삭제한 후 수신 측의 네트워크 계층으로 전달한다.


# 네트워크 계층

`프로토콜`
* 서로 다른 시스템의 데이터를 전송하는 규약

간단한 프로토콜
1. 오류없이 정보를 수신하면 확인 응답(ACK) 전송
2. 오류가 있으면 부정 응답(NAK)
3. 부정 응답을 받으면 다시 보냄
4. 부정 응답 10회 이상 발생하면 통신 중단

## TCP/IP

* 전송제어 프로토콜 + 인터넷 프로토콜
* IP : 패킷으로 변환된 데이터를 호스트에게 전송
* TCP : 오류 검출하면 재전송 요청

TCP/IP 계층
* 4 응용계층 : OSI(응용, 표현, 세션) FTP, SMTP, SNMP
* 3 전송계층 : OSI(전송) TCP, UDP
* 2 네트워크 계층 : OSI(네트워크) IP, ARP, ICMP, IGMP
* 1 네트워크 접속 계층 : OSI(데이터 링크, 물리) 이더넷 등

TCP/IP 주소
* 물리 주소(MAC) : 48비트 / 네트워크 접속 계층에서
* 인터넷 주소(IP) : 32비트 / 네트워크 계층에서
* 포트 주소 : 16비트 / 전송계층에서

! ARP = IP 주소를 MAC 주소로 변환